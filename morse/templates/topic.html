<!doctype html>
{% extends "base.html" %}
{% block head %}
<link rel=stylesheet type=text/css href="{{ url_for('style', filename='topic.css') }}">
<link rel=stylesheet type=text/css href="{{ url_for('style', filename='format.css') }}">
<link rel=stylesheet type=text/css href="{{ url_for('style', filename='infobanners.css') }}">
<link rel=stylesheet type=text/css href="{{ url_for('style', filename='sidemenu.css') }}">
<link rel=stylesheet type=text/css href="{{ url_for('style', filename='input/input.css') }}">
<link rel=stylesheet type=text/css href="{{ url_for('style', filename='input/post.css') }}">
<link rel=stylesheet type=text/css href="{{ url_for('style', filename='input/tools.css') }}">
<link rel=stylesheet type=text/css href="{{ url_for('style', filename='items/post.css') }}">
{% endblock %}
{% block content %}
 <div id="topictitlewrapper">
  <h1 id="topictitle">
   <a href="/board/{{ topic.board_id }}" id="goback">..
    <span id="gobacktooltip">Back to topic list</span>
   </a>{{ topic.title | safe }}
  </h1>
   <div class="clear"></div>
 </div>
<br/>
<div id="topic" may-post="{{ current_user.may_post_in(topic.board) }}" topic-id="{{ topic.id }}" topic-closed="{{ topic.closed }}">
 {% include "input/post.html" %}
 <div id="itemloader-top">
   <div id="info-init" class="hidden">Loading posts</div>
   <div id="info-older-items" class="hidden">Loading older posts</div>
 </div>
 <div id="itemcontainer" class="contentspinner" reloading="false">
 </div>
 <div id="itemloader-bottom">
   <div id="info-newer-items" class="hidden">Loading newer posts</div>
   <div id="info-rockbottom" class="hidden">You hit rock bottom!</div>
 </div>
</div>
<div id="side-menu">
  {% include "account/sidemenu.html" %}
  <div id="topictools">
   {% if not current_user.is_anonymous() %}
     {% if topic.followed %}
       <button id="follow-topic-switch" class="toolbutton unfollow" switched="Alert me about new posts">Don't alert me about new posts</button> 
     {% else %}
       <button id="follow-topic-switch" class="toolbutton follow" switched="Don't alert me about new posts">Alert me about new posts</button> 
     {% endif %}
   {% endif %}
  </div>
 <div class="clear"></div>
 {% if not current_user.is_anonymous() %}
 <div id="filter-dropdown" class="closed-dropdown" tooltip="filter">
   Filters
 </div>
 <div id="filter-menu" tooltip="filter">
     <div class="filter-option">
       <input type="checkbox" class="checkbox" id="filter-option-favorited">
       <label for="filter-option-favorited" class="checkbox-label"><span>Only posts I favorited</span></label>
     </div>
     <div class="filter-option">
       <input type="checkbox" class="checkbox" id="filter-option-unread">
       <label for="filter-option-unread" class="checkbox-label"><span>Only unread posts</span></label>
     </div>
 </div>
 {% endif %}
<div id="tooltip">
  <div id="tooltip-default">
  </div>
  <div id="tooltip-filter">
     Toggle filters to narrow the list of
     posts.
  </div>
  <div id="tooltip-post">
     Double Click on a post to answer it
  </div>
</div>
</div>
<div class="clear"></div>
{% endblock %}
{% block script %}
<script src="{{ url_for('js', filename='scrolling.js') }}"></script>
<script src="{{ url_for('js', filename='sidemenu.js') }}"></script>
<script src="{{ url_for('js', filename='topic.js') }}"></script>
<script src="{{ url_for('js', filename='input/post.js') }}"></script>
<script src="{{ url_for('js', filename='input/tools.js') }}"></script>
{% endblock %}
