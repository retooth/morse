<!doctype html>
{% extends "base.html" %}
{% block head %}
<link rel=stylesheet type=text/css href="{{ url_for('style', filename='topic.css') }}">
<link rel=stylesheet type=text/css href="{{ url_for('style', filename='format.css') }}">
<link rel=stylesheet type=text/css href="{{ url_for('style', filename='sidemenu.css') }}">
<link rel=stylesheet type=text/css href="{{ url_for('style', filename='input/input.css') }}">
<link rel=stylesheet type=text/css href="{{ url_for('style', filename='input/post.css') }}">
<link rel=stylesheet type=text/css href="{{ url_for('style', filename='input/tools.css') }}">
<link rel=stylesheet type=text/css href="{{ url_for('style', filename='items/post.css') }}">
{% endblock %}
{% block content %}
 <div id="topictitlewrapper">
  <h1 id="topictitle">
   <a href="/board/{{ topic.board_id }}" id="goback">..
    <span id="gobacktooltip">Back to topic list</span>
   </a>{{ topic.title | safe }}
  </h1>
   <div class="clear"></div>
 </div>
<div id="topic" may-post="{{ current_user.may_post_in(topic.board) }}" topic-id="{{ topic.id }}" topic-closed="{{ topic.closed }}">
 {% include "input/post.html" %}
 <div id="postloader-top">
   <div id="info-init" class="hidden">Loading posts</div>
   <div id="info-oldposts" class="hidden">Loading older posts</div>
 </div>
 <div id="postcontainer" class="contentspinner" reloading="false">
 </div>
 <div id="postloader-bottom">
   <div id="info-newposts" class="hidden">Loading newer posts</div>
   <div id="info-rockbottom" class="hidden">You hit rock bottom!</div>
 </div>
</div>
<div id="side-menu">
  {% include "account/sidemenu.html" %}
  <div id="topictools">
   {% if not current_user.is_anonymous() %}
     {% if topic.followed %}
       <button id="followswitch" class="toolbutton unfollow" switched="Follow Topic">Unfollow Topic</button> 
     {% else %}
       <button id="followswitch" class="toolbutton follow" switched="Unfollow Topic">Follow Topic</button> 
     {% endif %}
   {% endif %}
  </div>
 <div class="clear"></div>
 <div id="filter-dropdown" class="closed-dropdown">
   Filters
 </div>
 <div id="filter-menu">
   <span id="filter-option-tooltip-favorited" class="filter-menu-tooltip">Favorited posts</span>
   <span id="filter-option-tooltip-unread" class="filter-menu-tooltip">Unread posts</span><br/>
   <div id="filter-menu-button-wrapper">
     <button id="filter-option-favorited"></button>
     <button id="filter-option-unread"></button>
     <div class="clear"></div>
   </div>
   <br/>
 </div>
</div>
<div class="clear"></div>
{% endblock %}
{% block script %}
<script src="{{ url_for('js', filename='filters.js') }}"></script>
<script src="{{ url_for('js', filename='topic.js') }}"></script>
<script src="{{ url_for('js', filename='input/post.js') }}"></script>
<script src="{{ url_for('js', filename='input/tools.js') }}"></script>
{% endblock %}
