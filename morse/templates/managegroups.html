<!doctype html>
{% extends "base.html" %}
{% block content %}
{% include "dialogs.html" %}
<div id="adminwrapper">
<b>Manage Groups</b><br/><br/>
<nav id="groupnav">
<ul>
{% for group in groups %}
  <li group-id={{group.id}} class="label{{ group.label }}">{{group.name}}</li>
{% endfor %}
  <li group-id="0" id="newgroup">
  <input id="newgroupname" placeholder="New group"/>
  </li>
</ul>
<div class="clear"></div>
</nav><br/>
<div id="userlistwrapper">
  <div id="scrollup">
    <img src="{{ url_for('static', filename='chevron-up-white.png') }}">
  </div>
  <div id="userlist">
    <div id="scroller">
      {% for letter in userlist.firstletters %}
        <div letter="{{ letter }}" class="letterdivider">
          {{ letter }}
        </div>
        <ul letter={{ letter }} class="userlist">
          {% for user in userlist[letter] %}
            <li class="user" user-id="{{ user.id }}">{{ user.username }}</li>
          {% endfor %}
        </ul>
      {% endfor %}
    </div>   
  </div>   
  <div id="scrolldown">
    <img src="{{ url_for('static', filename='chevron-down-white.png') }}">
  </div>
</div>
{% for group in groups %}
  <div group-id="{{group.id}}" class="groupmenu
        {% if group.id == 3 or group.id == 4 %}
          readonly
        {% endif %}
        ">
    <!--span class="groupdescription">{{group.description}}</span><br-->
    <div class="header" tainted="false">
      <div class="colorpicker label0 {% if group.has_label(0) %} picked {% endif %}" label-id=0>
      </div>
      <div class="colorpicker label1 {% if group.has_label(1) %} picked {% endif %}" label-id=1>
      </div>
      <div class="colorpicker label2 {% if group.has_label(2) %} picked {% endif %}" label-id=2>
      </div>
      <div class="colorpicker label3 {% if group.has_label(3) %} picked {% endif %}" label-id=3>
      </div>
      <div class="colorpicker label4 {% if group.has_label(4) %} picked {% endif %}" label-id=4>
      </div>
      <div class="groupflags">
       {% if not (group.id == 3 or group.id == 4) %}
         <label>
          <input type="checkbox" class="groupflag mayclose" {% if group.may_close %} checked {% endif %}>
          May close threads 
         </label>
         <label>
          <input type="checkbox" class="groupflag mayedit" {% if group.may_edit %} checked {% endif %}>
          May edit arbitrary posts
         </label>
         <label>
          <input type="checkbox" class="groupflag maystick" {% if group.may_stick %} checked {% endif %}>
          May create stickies
         </label>
         {% endif %}
     </div>
     <div class="clear"></div>
    </div>
     <ul tainted="false" class="groupuserlist">
     {% for member in group.members %}
      <li user-id="{{member.id}}" class="user">
        {{ member.username }}
        {% if not (group.id == 3 or group.id == 4) %}
          <img class="deletefromgroup" src="{{ url_for('static', filename='close-small.png')}}"/>
        {% endif %}
      </li>
     {% endfor %}
     </ul>
     <div class="grouptools">
      {% if group.id > 4 %}
        <button class="deletegroup"><img src="{{ url_for('static', filename='trash.png') }}"/></button>
      {% endif %}
     </div>
    <div class="clear"></div>
  </div>
{% endfor %}
  <div id="welcomegrouptip" class="groupmenu groupmenutip" style="display:block">
    Select a group from the list above<br/>
    and drag users onto this field
  </div>
  <div id="newgrouptip" class="groupmenu groupmenutip" group-id="0">
     Want to create a new group?<br/>
     Type the name and hit Enter
  </div>
<div class="clear"></div>
<button id="updategroups" class="submit">Save</button>
</div>
{% endblock %}
